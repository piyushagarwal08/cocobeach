!function($){"use strict";$(document).ready(function($){if("undefined"!=typeof ere_profile_vars){var ajax_url=ere_profile_vars.ajax_url,upload_nonce=ere_profile_vars.upload_nonce,file_type_title=ere_profile_vars.file_type_title,ere_site_url=ere_profile_vars.ere_site_url,confirm_delete_msg=ere_profile_vars.confirm_delete_msg,confirm_become_agent_msg=ere_profile_vars.confirm_become_agent_msg,confirm_leave_agent_msg=ere_profile_vars.confirm_leave_agent_msg;$("#ere_update_profile").on("click",function(){var $this=$(this),$alert_title=$this.text();$.ajax({type:"POST",url:ajax_url,dataType:"json",data:{action:"ere_update_profile_ajax",user_firstname:$("#user_firstname").val(),user_lastname:$("#user_lastname").val(),user_des:$("#user_des").val(),user_position:$("#user_position").val(),user_email:$("#user_email").val(),user_mobile_number:$("#user_mobile_number").val(),user_fax_number:$("#user_fax_number").val(),user_company:$("#user_company").val(),user_licenses:$("#user_licenses").val(),user_office_number:$("#user_office_number").val(),user_office_address:$("#user_office_address").val(),user_facebook_url:$("#user_facebook_url").val(),user_twitter_url:$("#user_twitter_url").val(),user_googleplus_url:$("#user_googleplus_url").val(),user_linkedin_url:$("#user_linkedin_url").val(),user_pinterest_url:$("#user_pinterest_url").val(),user_instagram_url:$("#user_instagram_url").val(),user_skype:$("#user_skype").val(),user_youtube_url:$("#user_youtube_url").val(),user_vimeo_url:$("#user_vimeo_url").val(),user_website_url:$("#user_website_url").val(),profile_pic:$("#profile-pic-id").val(),ere_security_update_profile:$("#ere_security_update_profile").val()},beforeSend:function(){ERE.show_loading()},success:function(e){ERE.close_loading(0),e.success?ERE.popup_alert("fa fa-check-square-o",$alert_title,e.message):ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,e.message)},error:function(xhr){var err=eval("("+xhr.responseText+")");ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,err.Message)}})}),$("#ere_change_pass").on("click",function(){var securitypassword,oldpass,newpass,confirmpass,$this=$(this),$alert_title=$this.text();oldpass=$("#oldpass").val(),newpass=$("#newpass").val(),confirmpass=$("#confirmpass").val(),securitypassword=$("#ere_security_change_password").val(),$.ajax({type:"POST",dataType:"json",url:ajax_url,data:{action:"ere_change_password_ajax",oldpass:oldpass,newpass:newpass,confirmpass:confirmpass,ere_security_change_password:securitypassword},beforeSend:function(){ERE.show_loading()},success:function(e){e.success?window.location.href=ere_site_url:(ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,e.message))},error:function(xhr){var err=eval("("+xhr.responseText+")");ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,err.Message)}})}),$("#ere_delete_account").on("click",function(){var $this=$(this),$alert_title=$this.text();ERE.confirm_dialog($alert_title,confirm_delete_msg,function(){var ere_security_delete_profile=$("#ere_security_delete_profile").val();$.ajax({type:"post",url:ajax_url,dataType:"json",data:{action:"ere_delete_account_ajax",ere_security_delete_profile:ere_security_delete_profile},beforeSend:function(){ERE.show_loading()},success:function(e){e.success?window.location.href=ere_site_url:(ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,e.message))},error:function(xhr){var err=eval("("+xhr.responseText+")");ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,err.Message)}})})}),$("#ere_user_as_agent").on("click",function(){var $this=$(this),$alert_title=$this.text();ERE.confirm_dialog($alert_title,confirm_become_agent_msg,function(){$.ajax({type:"post",url:ajax_url,dataType:"json",data:{action:"ere_register_user_as_agent_ajax",ere_security_become_agent:$("#ere_security_become_agent").val()},beforeSend:function(){ERE.show_loading()},success:function(e){e.success?(ERE.close_loading(0),ERE.popup_alert("fa fa-check-square-o",$alert_title,e.message),setTimeout(function(){window.location.reload()},3e3)):(ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,e.message))},error:function(xhr){var err=eval("("+xhr.responseText+")");ERE.close_loading(0),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,err.Message)}})})}),$("#ere_leave_agent").on("click",function(){var $this=$(this),$alert_title=$this.text();ERE.confirm_dialog($alert_title,confirm_leave_agent_msg,function(){$.ajax({type:"post",url:ajax_url,dataType:"json",data:{action:"ere_leave_agent_ajax",ere_security_leave_agent:$("#ere_security_leave_agent").val()},beforeSend:function(){ERE.show_loading()},success:function(e){e.success?window.location.reload():(ERE.show_loading(),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,e.message))},error:function(xhr){var err=eval("("+xhr.responseText+")");ERE.show_loading(),ERE.popup_alert("fa fa-exclamation-triangle",$alert_title,err.Message)}})})});var uploader=new plupload.Uploader({browse_button:"select-profile-image",file_data_name:"ere_upload_file",container:"ere-profile-plupload-container",multi_selection:!1,url:ajax_url+"?action=ere_profile_image_upload_ajax&nonce="+upload_nonce,filters:{mime_types:[{title:file_type_title,extensions:"jpg,jpeg,gif,png"}],max_file_size:"2000kb",prevent_duplicates:!0}});uploader.init(),uploader.bind("FilesAdded",function(e,r){var a="";plupload.each(r,function(e){a+='<div id="holder-'+e.id+'" class="profile-thumb"></div>'}),document.getElementById("user-profile-img").innerHTML=a,e.refresh(),uploader.start()}),uploader.bind("UploadProgress",function(e,r){document.getElementById("holder-"+r.id).innerHTML='<span><i class="fa fa-spinner fa-spin"></i></span>'}),uploader.bind("Error",function(e,r){document.getElementById("errors-log").innerHTML+="<br/>Error #"+r.code+": "+r.message}),uploader.bind("FileUploaded",function(e,r,a){var t=$.parseJSON(a.response);if(t.success){var l='<img src="'+t.url+'" alt="" /><input type="hidden" class="profile-pic-id" id="profile-pic-id" name="profile-pic-id" value="'+t.attachment_id+'"/>';document.getElementById("holder-"+r.id).innerHTML=l}}),$("#remove-profile-image").on("click",function(e){e.preventDefault(),document.getElementById("user-profile-img").innerHTML='<div class="profile-thumb"></div>'})}})}(jQuery);