!function($){"use strict";var checkFilter=!0,isRTL=$("body").hasClass("rtl"),ERE_property_featured={vars:{filter_id:"",property_items:[]},init:function(){this.filterCarousel(),this.resize(),ERE.select_term(),this.cityFilterScrollBar();var a=$(".property-sync-content-wrap");a.each(function(){ERE_property_featured.syncPropertyCarousel($(this))}),this.calcPaddingTopBottom(),setTimeout(this.calcPaddingTopBottom,300),setTimeout(this.calcPaddingTopBottom,1e3)},filterCarousel:function(){var a=$('[data-filter-type="carousel"]');a.each(function(){var a=$("a",$(this));ERE_property_featured.executeFilter(a)})},executeFilter:function(objectClick){$(objectClick).button({loadingText:'<span class="fa fa-spinner fa-spin"></span>'}),$(objectClick).parent().next().children("select").children().button({loadingText:'<span class="fa fa-spinner fa-spin"> Loading ...</span>'}),objectClick.on("click",function(event){event.preventDefault();var thisObject=$(this),filterId=thisObject.parent().attr("data-filter_id"),$property_content=$('.property-content[data-filter_id="'+filterId+'"]'),ere_property=$property_content.parent();if(thisObject.hasClass("active-filter"))return thisObject.css("cursor","not-allowed"),!1;if(thisObject.parent().children("a").css("cursor","wait"),checkFilter){checkFilter=!1;var dataFilter=thisObject.data("filter"),select_filter=thisObject.parent().next().children("select");if(ERE_property_featured.vars.filter_id=thisObject.parent().data("filter_id"),thisObject.parent().find(".active-filter").removeClass("active-filter"),thisObject.addClass("active-filter"),ere_property.css("height",ere_property.outerHeight()),"undefined"==typeof ERE_property_featured.vars.property_items[dataFilter+"-"+ERE_property_featured.vars.filter_id]){thisObject.css("width",thisObject.outerWidth()),select_filter.children().button("loading");var $this=thisObject.button("loading"),$ajax_url=objectClick.closest(".filter-wrap").data("admin-url");$.ajax({url:$ajax_url,data:{action:"ere_property_featured_fillter_city_ajax",layout_style:thisObject.parent().data("layout-style"),property_city:thisObject.data("filter"),item_amount:thisObject.parent().data("item-amount"),color_scheme:thisObject.parent().data("color_scheme")},success:function(a){var b=$(".property-item",a);ERE_property_featured.vars.property_items[dataFilter+"-"+ERE_property_featured.vars.filter_id]=a,$property_content.css("opacity",0),$property_content.trigger("destroy.owl.carousel"),$property_content.html(b),$property_content.css("opacity",1),$property_content.imagesLoaded(function(){ERE.set_item_effect(b,"hide"),ERE_Carousel.owlCarousel(),b=$(".property-item",$property_content),ERE.set_item_effect(b,"show"),setTimeout(function(){ere_property.css("height","auto")},200)}),setTimeout(function(){thisObject.css("width","auto")},100),checkFilter=!0,$this.button("reset"),select_filter.children().button("reset"),select_filter.removeAttr("disabled"),select_filter.children("option").removeAttr("selected"),select_filter.children('option[value="'+dataFilter+'"]').attr("selected","selected"),thisObject.parent().children("a").css("cursor","pointer"),thisObject.parent().children(".active-filter").css("cursor","not-allowed")},error:function(xhr){var err=eval("("+xhr.responseText+")");console.log(err.Message),$this.button("reset"),checkFilter=!0}})}else{var old_data=ERE_property_featured.vars.property_items[dataFilter+"-"+ERE_property_featured.vars.filter_id],$newElems=$(".property-item",old_data);$property_content.css("opacity",0),$property_content.trigger("destroy.owl.carousel"),$property_content.html($newElems),ERE.set_item_effect($newElems,"hide"),$property_content.css("opacity",1),ERE_Carousel.owlCarousel(),$property_content.imagesLoaded(function(){$newElems=$(".property-item",$property_content),ERE.set_item_effect($newElems,"show"),setTimeout(function(){ere_property.css("height","auto")},200)}),checkFilter=!0,select_filter.removeAttr("disabled"),select_filter.children("option").removeAttr("selected"),select_filter.children('option[value="'+dataFilter+'"]').attr("selected","selected"),thisObject.parent().children("a").css("cursor","pointer"),thisObject.parent().children(".active-filter").css("cursor","not-allowed")}}})},resize:function(){$(window).resize(function(){ERE_property_featured.executeResize()}),$(window).on("orientationchange",function(){ERE_property_featured.executeResize()})},executeResize:function(){$(".property-content.owl-carousel").each(function(){var a=$(this);setTimeout(function(){var b=$(".property-item",a);ERE.set_item_effect(b,"show")},500)}),ERE_property_featured.cityFilterScrollBar();var a=$(".property-sync-content-wrap");a.each(function(){ERE_property_featured.syncPropertyCarousel($(this))}),ERE_property_featured.calcPaddingTopBottom()},cityFilterScrollBar:function(){$(".property-filter-content",".property-cities-filter").each(function(){var a=$(this);a.outerHeight()>530?(a.css("height","530px"),a.css("overflow-y","auto"),$.isFunction($.fn.perfectScrollbar)&&a.perfectScrollbar({wheelSpeed:.5,suppressScrollX:!0})):a.css("height","auto")})},syncPropertyCarousel:function(a){function d(a){var b=a.item.index;c.find(".owl-item").removeClass("current").eq(b).addClass("current");var d=c.find(".owl-item.active").length-1,e=c.find(".owl-item.active").first().index(),f=c.find(".owl-item.active").last().index();b>f&&c.data("owl.carousel").to(b,500,!0),b<e&&c.data("owl.carousel").to(b-d,500,!0)}function e(a){var c=a.item.index;b.data("owl.carousel").to(c,500,!0)}var b=a.find(".property-content-carousel"),c=a.find(".property-image-carousel");b.owlCarousel({items:1,nav:!1,dots:!1,loop:!1,smartSpeed:500,rtl:isRTL}).on("changed.owl.carousel",d),c.on("initialized.owl.carousel",function(){c.find(".owl-item").eq(0).addClass("current")}).owlCarousel({items:1,nav:!0,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],dots:!1,rtl:isRTL,margin:0}).on("changed.owl.carousel",e),c.on("click",".owl-item",function(a){if(a.preventDefault(),!$(this).hasClass("current")){var c=$(this).index();b.data("owl.carousel").to(c,500,!0)}})},calcPaddingTopBottom:function(){$(".main-content-inner",".property-sync-carousel").each(function(){var a=$(this),b=a.height(),c=a.parent().next(".property-image-content").children().outerHeight(),d=parseInt(c)-parseInt(b);d>0&&window.matchMedia("(min-width: 1200px)").matches?a.css({"padding-top":d/2+"px","padding-bottom":d/2+"px"}):a.css({"padding-top":"","padding-bottom":""})})}};$(document).ready(function(){ERE_property_featured.init()})}(jQuery);