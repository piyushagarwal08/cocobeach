!function($){"use strict";var checkFilter=!0,ERE_property_gallery={vars:{filter_id:"",property_items:[]},init:function(){this.filterCarousel(),this.filterRow(),this.resize(),ERE.select_term()},filterCarousel:function(){var e=$('[data-filter-type="carousel"]');e.each(function(){var e=$("a",$(this));ERE_property_gallery.executeFilter("filterCarousel",e)})},filterRow:function(){var e=$('[data-filter-type="filter"]'),t=e.data("item"),r=$("body").hasClass("rtl");"undefined"==typeof t&&(t=".property-item"),$('[data-layout="fitRows"]').each(function(){var e=$(this);e.imagesLoaded(function(){e.isotope({itemSelector:t,layoutMode:"fitRows",isOriginLeft:!r,transitionDuration:"0.8s"}).isotope("layout")})}),$(document).on("vc-tab-clicked",function(e,t){$('[data-layout="fitRows"]',t).each(function(){$(this).isotope("layout")})}),$(e).each(function(){if("filter-isotope"==$(this).data("filter-style"))$("a",$(this)).on("click",function(e){e.preventDefault();var t=$(this).parent().attr("data-filter_id"),r=$('.property-content[data-filter_id="'+t+'"]'),i=!0;if($(this).hasClass("active-filter")&&(i=!1),checkFilter&&i){var o=$(this).attr("data-filter");r.isotope({filter:o}),$(this).parent().children("a").css("cursor","pointer"),$(this).parent().children("a").removeClass("active-filter"),$(this).addClass("active-filter"),$(this).css("cursor","not-allowed");var l=$(this).parent().next().children("select");l.removeAttr("disabled"),l.children("option").removeAttr("selected"),l.children('option[value="'+o+'"]').attr("selected","selected"),l.val()!=o&&l.selectize()[0].selectize.setValue(o)}});else{var e=$("a",$(this));ERE_property_gallery.executeFilter("filterRow",e)}})},executeFilter:function($filter_style,objectClick){$(objectClick).button({loadingText:'<span class="fa fa-spinner fa-spin"></span>'}),$(objectClick).parent().next().children("select").children().button({loadingText:'<span class="fa fa-spinner fa-spin"> Loading ...</span>'}),objectClick.on("click",function(event){event.preventDefault();var thisObject=$(this),filterId=thisObject.parent().attr("data-filter_id"),$property_content=$('.property-content[data-filter_id="'+filterId+'"]'),ere_property=$property_content.parent();if(thisObject.hasClass("active-filter"))return thisObject.css("cursor","not-allowed"),!1;if(thisObject.parent().children("a").css("cursor","wait"),checkFilter){checkFilter=!1;var dataFilter=thisObject.data("filter"),select_filter=thisObject.parent().next().children("select");if(ERE_property_gallery.vars.filter_id=thisObject.parent().data("filter_id"),thisObject.parent().find(".active-filter").removeClass("active-filter"),thisObject.addClass("active-filter"),ere_property.css("height",ere_property.outerHeight()),"undefined"==typeof ERE_property_gallery.vars.property_items[dataFilter+"-"+ERE_property_gallery.vars.filter_id]){thisObject.css("width",thisObject.outerWidth()),select_filter.children().button("loading");var $this=thisObject.button("loading"),$ajax_url=objectClick.closest(".filter-inner").data("admin-url");$.ajax({url:$ajax_url,data:{action:"ere_property_gallery_fillter_ajax",is_carousel:thisObject.parent().data("is-carousel"),columns_gap:thisObject.parent().data("columns-gap"),columns:thisObject.parent().data("columns"),property_type:thisObject.data("filter"),item_amount:thisObject.parent().data("item-amount"),color_scheme:thisObject.parent().data("color_scheme")},success:function(e){var t=$(".property-item",e);ERE_property_gallery.vars.property_items[dataFilter+"-"+ERE_property_gallery.vars.filter_id]=e,$property_content.css("opacity",0),"filterRow"==$filter_style?$property_content.isotope("destroy"):$property_content.trigger("destroy.owl.carousel"),$property_content.html(t),"filterRow"==$filter_style&&ERE.set_item_effect(t,"hide"),$property_content.css("opacity",1),$property_content.imagesLoaded(function(){"filterCarousel"==$filter_style?(ERE.set_item_effect(t,"hide"),ERE_Carousel.owlCarousel()):ERE_property_gallery.filterRow(),t=$(".property-item",$property_content),ERE.set_item_effect(t,"show"),setTimeout(function(){ere_property.css("height","auto")},200)}),setTimeout(function(){thisObject.css("width","auto")},100),checkFilter=!0,$this.button("reset"),select_filter.children().button("reset"),select_filter.removeAttr("disabled"),select_filter.children("option").removeAttr("selected"),select_filter.children('option[value="'+dataFilter+'"]').attr("selected","selected"),thisObject.parent().children("a").css("cursor","pointer"),thisObject.parent().children(".active-filter").css("cursor","not-allowed")},error:function(xhr){var err=eval("("+xhr.responseText+")");console.log(err.Message),$this.button("reset"),checkFilter=!0}})}else{var old_data=ERE_property_gallery.vars.property_items[dataFilter+"-"+ERE_property_gallery.vars.filter_id],$newElems=$(".property-item",old_data);"filterRow"==$filter_style&&$property_content.isotope("destroy"),$property_content.css("opacity",0),"filterCarousel"==$filter_style&&$property_content.trigger("destroy.owl.carousel"),$property_content.html($newElems),ERE.set_item_effect($newElems,"hide"),$property_content.css("opacity",1),"filterCarousel"==$filter_style&&ERE_Carousel.owlCarousel(),$property_content.imagesLoaded(function(){$newElems=$(".property-item",$property_content),ERE.set_item_effect($newElems,"show"),setTimeout(function(){ere_property.css("height","auto")},200),"filterRow"==$filter_style&&ERE_property_gallery.filterRow()}),checkFilter=!0,select_filter.removeAttr("disabled"),select_filter.children("option").removeAttr("selected"),select_filter.children('option[value="'+dataFilter+'"]').attr("selected","selected"),thisObject.parent().children("a").css("cursor","pointer"),thisObject.parent().children(".active-filter").css("cursor","not-allowed")}}})},resize:function(){$(window).resize(function(){ERE_property_gallery.executeResize()}),$(window).on("orientationchange",function(){ERE_property_gallery.executeResize()})},executeResize:function(){$(".property-content.owl-carousel").each(function(){var e=$(this);setTimeout(function(){var t=$(".property-item",e);ERE.set_item_effect(t,"show")},500)})}};$(document).ready(function(){ERE_property_gallery.init()})}(jQuery);