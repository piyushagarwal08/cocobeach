jQuery(document).ready(function($){"use strict";function ere_execute_url_search(){$("#search-btn",".search-properties-form").on("click",function(e){e.preventDefault();var t=$(this).closest(".search-properties-form"),a=t.data("href"),r=[],i="?",n=$('[name="advanced"]').attr("value");if(-1!==a.indexOf("?")&&(i="&"),$(".search-field",t).each(function(){var e=$(this),t=e.attr("name"),a=e.val(),i=e.data("default-value");(1!=e.closest(".search-advanced-info").length||"1"==n)&&a!=i&&(r[t]=a)}),$(".ere-sliderbar-filter",t).each(function(){var e=$(this),t=e.find(".min-input-request").attr("name"),a=e.find(".max-input-request").attr("name"),i=e.find(".min-input-request").val(),s=e.find(".max-input-request").val(),o=e.data("min-default"),l=e.data("max-default");(1!=e.closest(".search-advanced-info").length||"1"==n)&&(i!=o||s!=l)&&(r[t]=i,r[a]=s)}),"undefined"!=typeof r["featured-search"]){var s="";$('[name="other_feature"]',t).each(function(){var e=$(this),t=e.attr("value");e.is(":checked")&&(s+=t+";")}),""!==s&&(s=s.substring("0",s.length-1),r.other_feature=s)}if(r!==[])for(var o in r)r.hasOwnProperty(o)&&(i+=o+"="+r[o]+"&");i=i.substring("0",i.length-1),window.location.href=a+i})}function ere_set_slider_filter(e){var t,a,r=e,i=parseInt(r.attr("data-min-default")),n=parseInt(r.attr("data-max-default")),s=r.attr("data-min"),o=r.attr("data-max"),l=r.find(".sidebar-filter");l.slider({min:i,max:n,range:!0,values:[s,o],slide:function(e,i){t=i.values[0],a=i.values[1],r.attr("data-min",t),r.attr("data-max",a),r.find("input.min-input-request").attr("value",t),r.find("input.max-input-request").attr("value",a),r.find("span").hasClass("not-format")?(r.find("span.min-value").html(t),r.find("span.max-value").html(a)):(r.find("span.min-value:not(.not-format)").html(ERE.number_format(t)),r.find("span.max-value:not(.not-format)").html(ERE.number_format(a)))},stop:function(e,t){}})}function ere_register_slider_filter(){$(".ere-sliderbar-filter").each(function(){var e=$(this);ere_set_slider_filter(e)})}function ere_set_slider_value(){$(".ere-sliderbar-filter").each(function(){var e=$(this),t=e.attr("data-min-default"),a=e.attr("data-max-default"),r=e.attr("data-min"),i=e.attr("data-max"),n=(r-t)/(a-t)*100+"%",s=(i-r)/(a-t)*100+"%",o=(i-t)/(a-t)*100+"%";e.find(".ui-slider-range.ui-corner-all.ui-widget-header").css({left:n,width:s}),e.find(".ui-slider-handle.ui-corner-all.ui-state-default").css("left",n),e.find(".ui-slider-handle.ui-corner-all.ui-state-default:last-child").css("left",o)})}var ajax_url=ere_search_vars.ajax_url,ere_get_states_by_country=function(){if($(".ere-property-country-ajax").length){var e=$(".ere-property-country-ajax").val();""!=e&&$.ajax({type:"POST",url:ajax_url,data:{action:"ere_get_states_by_country_ajax",country:e,type:1},success:function(e){$(".ere-property-state-ajax").html(e);var t=$(".ere-property-state-ajax").attr("data-selected");"undefined"!=t&&$(".ere-property-state-ajax").val(t)}})}};ere_get_states_by_country(),$(".ere-property-country-ajax").on("change",function(){ere_get_states_by_country()});var ere_get_cities_by_state=function(){if($(".ere-property-state-ajax").length){var e=$(".ere-property-state-ajax").val();""!=e&&$.ajax({type:"POST",url:ajax_url,data:{action:"ere_get_cities_by_state_ajax",state:e,type:1},success:function(e){$(".ere-property-city-ajax").html(e);var t=$(".ere-property-city-ajax").attr("data-selected");"undefined"!=t&&$(".ere-property-city-ajax").val(t)}})}};ere_get_cities_by_state(),$(".ere-property-state-ajax").on("change",function(){ere_get_cities_by_state()});var ere_get_neighborhoods_by_city=function(){if($(".ere-property-city-ajax").length){var e=$(".ere-property-city-ajax").val();""!=e&&$.ajax({type:"POST",url:ajax_url,data:{action:"ere_get_neighborhoods_by_city_ajax",city:e,type:1},success:function(e){$(".ere-property-neighborhood-ajax").html(e);var t=$(".ere-property-neighborhood-ajax").attr("data-selected");"undefined"!=t&&$(".ere-property-neighborhood-ajax").val(t)}})}};if(ere_get_neighborhoods_by_city(),$(".ere-property-city-ajax").on("change",function(){ere_get_neighborhoods_by_city()}),$(".btn-status-filter",".ere-search-status-tab").on("click",function(e){e.preventDefault(),$(this).parent().find("input").val($(this).data("value")),$(this).parent().find("button").removeClass("active"),$(this).addClass("active")}),ere_execute_url_search(),$(".ere-sliderbar-filter.ere-sliderbar-price").on("register.again",function(){$(".ere-sliderbar-filter.ere-sliderbar-price").each(function(){var e=$(this);ere_set_slider_filter(e)}),$(".ere-sliderbar-filter.ere-sliderbar-area").each(function(){var e=$(this);ere_set_slider_filter(e)})}),ere_register_slider_filter(),ere_set_slider_value(),$(".search-properties-form .advanced-search-button").each(function(){var e=$(this);e.on("click",function(t){var a=$(this),r=a.parent().parent().parent(),i=e.find('input[name="advanced"]'),n=i.attr("value");r.find(".search-advanced-info").slideToggle(),"0"==n?i.attr("value","1"):i.attr("value","0")})}),$(".other-featured .enable-featured .button-other-featured").each(function(){var e=$(this);e.on("click",function(e){e.preventDefault();var t=$(this),a=t.parent(),r=t.parent().parent(),i=$('input[name="featured-search"]',a);r.find(".featured-list").slideToggle(),t.toggleClass("show"),1==t.hasClass("show")?(t.find(".hide-featured-text").removeClass("hide"),t.find(".show-featured-text").addClass("hide"),i.attr("value","1")):(t.find(".hide-featured-text").addClass("hide"),t.find(".show-featured-text").removeClass("hide"),i.attr("value","0"))})}),"undefined"!=typeof ere_search_vars){var keyword_auto_complete=ere_search_vars.keyword_auto_complete,ere_auto_complete=function(){var e=$.parseJSON(keyword_auto_complete),t=$('input[name="keyword"]').autocomplete({source:e,delay:300,minLength:1,change:function(){}});t.autocomplete("option","change")};ere_auto_complete();var ere_title_auto_complete=function(){var count_prop=0,auto_complete_container=$(".ere-result-by-title");$('input[name="title"]').keyup(function(){var $this=$(this),ere_result_by_title=$this.parents().find(".ere-result-by-title");$(this).val().length>=2?(ere_result_by_title.fadeIn(),$.ajax({type:"POST",url:ajax_url,data:{action:"ere_title_auto_complete_search",title:$(this).val()},beforeSend:function(){count_prop++,1==count_prop&&ere_result_by_title.html('<div class="processing-title"><i class="fa fa-spinner fa-spin fa-fw"></i></div>')},success:function(e){count_prop--,0==count_prop&&(ere_result_by_title.show(),""!=e&&(ere_result_by_title.empty().html(e).bind(),ere_result_by_title.find("a.link-close").on("click",function(e){e.preventDefault(),ere_result_by_title.fadeOut()})))},error:function(xhr){count_prop--,0==count_prop&&ere_result_by_title.html('<div class="processing-title"><i class="fa fa-spinner fa-spin fa-fw"></i></div>');var err=eval("("+xhr.responseText+")");console.log(err.Message)}})):auto_complete_container.fadeOut()}),auto_complete_container.on("click","li",function(){$('input[name="title"]').val($(this).data("text")),auto_complete_container.fadeOut()}).bind()};ere_title_auto_complete()}});